# ========================================
# SERVER CONFIGURATION
# ========================================
server.port=8761
spring.application.name=service-registry

# ========================================
# SECURITY CONFIGURATION
# ========================================
# Credentials for Eureka Dashboard access
spring.security.user.name=admin
spring.security.user.password=admin123

# ========================================
# EUREKA SERVER CONFIGURATION
# ========================================

# Hostname configuration
eureka.instance.hostname=localhost
eureka.instance.prefer-ip-address=false

# Eureka server should NOT register itself as a client
eureka.client.register-with-eureka=false
eureka.client.fetch-registry=false

# Service URL (where clients will connect)
eureka.client.service-url.defaultZone=http://localhost:8761/eureka/

# ========================================
# EUREKA SERVER TUNING
# ========================================

# How often to check for expired services (milliseconds)
# Default:  60000 (60 seconds)
# Lower value = faster detection of dead services
eureka.server.eviction-interval-timer-in-ms=10000

# Self-preservation mode (prevents mass de-registration during network issues)
# Production: true (prevents accidental service removal)
# Development: false (faster testing)
eureka.server.enable-self-preservation=true

# Threshold for self-preservation mode (percentage of services that must send heartbeats)
eureka.server.renewal-percent-threshold=0.85

# Response cache update interval (milliseconds)
# Lower value = more up-to-date service info
eureka.server.response-cache-update-interval-ms=5000

# Initial time to wait before Eureka Server advertises itself (milliseconds)
eureka.server.wait-time-in-ms-when-sync-empty=0

# How long to wait for peer replication (in a cluster)
eureka.server.peer-node-read-timeout-ms=1000

# ========================================
# ACTUATOR (HEALTH MONITORING)
# ========================================

# Enable health, info, and metrics endpoints
management.endpoints.web.exposure.include=health,info,metrics,env

# Show detailed health information
management.endpoint.health.show-details=always

# Base path for actuator endpoints
management.endpoints.web.base-path=/actuator

# ========================================
# LOGGING CONFIGURATION
# ========================================

# Root logging level
logging.level.root=INFO

# Eureka-specific logging
logging.level.com.netflix.eureka=DEBUG
logging.level.com.netflix.discovery=DEBUG

# Spring Cloud logging
logging.level.org.springframework.cloud=DEBUG

# Log pattern
logging.pattern.console=%d{yyyy-MM-dd HH: mm:ss} [%thread] %-5level %logger{36} - %msg%n

# Log file (optional - for production)
# logging.file.name=logs/service-registry.log
# logging.file.max-size=10MB
# logging.file.max-history=30

# ========================================
# ADDITIONAL CONFIGURATION (OPTIONAL)
# ========================================

# Application metadata (visible in Eureka dashboard)
eureka.instance.metadata-map.version=1.0.0
eureka.instance.metadata-map.environment=development

# Instance ID format (how service appears in dashboard)
eureka.instance.instance-id=${spring.application.name}:${server.port}

# ========================================
# DEVELOPMENT vs PRODUCTION PROFILES
# ========================================

# To use different configs for dev/prod, create:
# - application-dev.properties
# - application-prod.properties
# Then run with: -Dspring.profiles.active=prod
